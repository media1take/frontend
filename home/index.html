<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Omegle - Talk to Strangers</title>
    <link rel="stylesheet" href="/home/Omegle.css" type="text/css">
    <link rel="shortcut icon" href="/img/logo.png" type="image/x-icon">
</head>
<body>
    <style>
      /* Small page-specific overrides to center content and add an inclined title */
      .site-container{max-width:1100px;margin:0 auto;padding:1.2rem;}
      header.site-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 0}
      .brand{display:flex;align-items:center;gap:1rem;text-decoration:none}
      .brand img{height:56px;max-height:64px;width:auto}
      .site-title{font-weight:800;font-size:2.4rem;line-height:1;color:#0b5cff;display:inline-block;transform:rotate(-6deg);transform-origin:left center}
      nav.site-nav{display:flex;gap:1rem;align-items:center}
      nav.site-nav a{color:#111;text-decoration:none;padding:.5rem .8rem;border-radius:8px}
      nav.site-nav a:hover{background:rgba(5,129,254,0.06)}
      .hero{display:flex;flex-direction:column;align-items:center;text-align:center;padding:2.2rem 1rem}
      .hero p.lead{font-size:1.25rem;color:#334155;max-width:70ch;margin:0.6rem 0}
      .hero .actions{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-top:1.25rem}
      .btn{display:inline-flex;align-items:center;justify-content:center;padding:.9rem 1.15rem;border-radius:10px;border:none;cursor:pointer;font-weight:600}
      .btn.primary{background:linear-gradient(135deg,#7EBFFF,#0581FE);color:#fff}
      .btn.ghost{background:#fff;border:1px solid rgba(0,0,0,0.06)}
      .info-box{background:#fff;border-radius:12px;padding:1rem;margin-top:1rem;max-width:900px;box-shadow:0 6px 16px rgba(2,6,23,0.06)}
      .interest-input{width:100%;max-width:420px;padding:.9rem 1rem;border:1px solid rgba(0,0,0,0.08);border-radius:8px;font-size:1.05rem}
      footer.site-footer{padding:1.2rem 0;color:#64748B;text-align:center}
      @media (min-width:900px){.brand img{height:72px}.site-title{font-size:3.2rem}}

      /* Online badge sizing */
      .online-badge{display:flex;flex-direction:column;align-items:flex-end;font-size:1rem;color:#10B981}
      .online-badge strong{font-size:2.6rem;color:#0b5cff;line-height:1;font-weight:800}
      .online-badge small{font-size:0.95rem;color:#64748B}

      /* Mobile responsiveness: stack header, make CTAs full width */
      @media (max-width: 900px) {
        .site-container{padding:1rem}
        .site-title{font-size:2rem}
        .brand img{height:56px}
      }

      @media (max-width: 700px) {
        header.site-header{flex-direction:column;align-items:center;gap:.6rem;padding:.8rem 0}
        nav.site-nav{width:100%;display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap}
        .online-badge{margin-left:0;text-align:center;align-items:center}
        .site-title{font-size:1.6rem;transform:rotate(-4deg)}
        .online-badge strong{font-size:2rem}
        .online-badge small{font-size:0.85rem}
        .brand{justify-content:center}
        .hero{padding:1.1rem .8rem}
        .hero p.lead{font-size:1.05rem;max-width:54ch}
        .hero .actions{flex-direction:column;align-items:stretch;width:100%}
        .btn{width:100%;max-width:420px}
        .info-box{padding:.9rem;margin-top:.8rem}
        .interest-input{max-width:100%}
        img{max-width:100%;height:auto}
      }

      /* Menu styles */
      .menu-toggle{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:.45rem .6rem;border-radius:8px;cursor:pointer;font-size:1.1rem}
      .menu-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);opacity:0;visibility:hidden;transition:opacity .2s;z-index:1200}
      .menu-backdrop.open{opacity:1;visibility:visible}
      .site-menu{position:fixed;left:0;top:0;height:100%;width:300px;max-width:80%;background:#fff;box-shadow:2px 0 24px rgba(2,6,23,0.12);transform:translateX(-110%);transition:transform .28s cubic-bezier(.2,.9,.2,1);z-index:1300}
      .site-menu.open{transform:translateX(0)}
      .site-menu-inner{padding:1.2rem}
      .menu-close{background:transparent;border:none;font-size:2.2rem;position:absolute;right:0.7rem;top:0.4rem;cursor:pointer}
      .menu-list{list-style:none;padding:1rem 0;margin:2.6rem 0 0}
      .menu-item{display:block;padding:.9rem 1rem;border-radius:8px;color:#0b1726;text-decoration:none;font-weight:600}
      .menu-item:hover{background:rgba(5,129,254,0.06)}

      @media (max-width:700px){
        .site-menu{width:100%;max-width:100%}
      }
    </style>

    <div class="site-container">
      <!-- Menu backdrop and slide-out menu -->
      <div id="menuBackdrop" class="menu-backdrop" hidden></div>
      <nav id="siteMenu" class="site-menu" aria-hidden="true" role="menu" aria-label="Main menu">
        <div class="site-menu-inner">
          <button id="menuClose" class="menu-close" aria-label="Close menu">×</button>
          <ul class="menu-list">
            <li><a class="menu-item" role="menuitem" href="/chat">Text chat</a></li>
            <li><a class="menu-item" role="menuitem" href="/video">Video chat</a></li>
            <li><a class="menu-item" role="menuitem" href="/community">Community</a></li>
            <li><a class="menu-item" role="menuitem" href="/blog">Blog</a></li>
            <li><a class="menu-item" role="menuitem" href="/terms">Terms</a></li>
            <li><a class="menu-item" role="menuitem" href="/privacy">Privacy</a></li>
            <li><a class="menu-item" role="menuitem" href="/guidelines">Community Guidelines</a></li>
          </ul>
        </div>
      </nav>
      <header class="site-header" role="banner" aria-label="Top header">
        <a href="/" class="brand">
          <img src="/img/omgelelogocroped.png" alt="Omegle logo">
          <span class="site-title">Talk To Strangers</span>
        </a>
        <nav class="site-nav" role="navigation" aria-label="Primary">
        </nav>
        <!-- Online count badge (updated by homepage socket) -->
        <div class="online-badge" style="margin-left:1rem;text-align:right;display:flex;flex-direction:column;align-items:flex-end">
          <strong id="onlineCount">0</strong>
          <small style="font-size:0.85rem;color:#64748B">online now</small>
        </div>
      </header>

      <main role="main">
        <section class="hero" aria-labelledby="hero-title">
          <h1 id="hero-title" class="site-title" style="transform:rotate(-6deg);">Meet strangers. Have fun.</h1>
          <p class="lead">Use Omegle from any browser — no app required. Chat anonymously, add interests to match, and stop anytime.</p>

          <div class="actions">
            <a class="btn primary" href="/video" title="Start video chat">Start Video</a>
            <a class="btn ghost" href="/chat" title="Start text chat">Start Text</a>
          </div>

          <div class="info-box" aria-live="polite">
            <p><strong>Video is monitored.</strong> Keep chats appropriate. You must be 18+ (or 13+ with parental permission) — see our <a href="/terms" target="_blank">Terms</a> and <a href="/guidelines" target="_blank">Community Guidelines</a>.</p>

            <div style="margin-top:.9rem;display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;align-items:center">
              <input class="interest-input" type="text" placeholder="Add an interest (optional)">
              <a class="btn ghost" href="/community">Community</a>
            </div>
          </div>
        </section>

        <section aria-label="Additional info" style="margin-top:1.2rem;display:flex;gap:1rem;flex-wrap:wrap;justify-content:center">
          <img src="/img/standwithhk.jpeg" alt="Stand with Hong Kong" style="max-width:320px;border-radius:8px;box-shadow:0 6px 18px rgba(2,6,23,0.06)">
          <div style="max-width:48ch">
            <p>Omegle pairs you randomly with another person to talk one‑on‑one. Add interests to increase chances of a topic match. Chats are anonymous unless you share personal info.</p>
          </div>
        </section>
      </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="footer-links">
            <a href="/terms" target="_blank">Terms of Service</a>
            <span aria-hidden="true">•</span>
            <a href="/privacy" target="_blank">Privacy Policy</a>
            <span aria-hidden="true">•</span>
            <a href="/guidelines" target="_blank">Community Guidelines</a>
        </div>
        <div class="footer-copy">© 2025 Omegle.uk.to — Connect. Chat. Explore.</div>
    </footer>

    <!-- Socket.IO and Config -->
    <script src="/config.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
      // Menu toggle behavior
      (function(){
        const toggleButton = document.createElement('button');
        toggleButton.id = 'menuToggle';
        toggleButton.className = 'menu-toggle';
        toggleButton.setAttribute('aria-expanded','false');
        toggleButton.setAttribute('aria-controls','siteMenu');
        toggleButton.innerHTML = '☰ Menu';

        // insert toggle button before nav for accessibility
        const header = document.querySelector('header.site-header');
        if(header){
          header.insertBefore(toggleButton, header.querySelector('.site-nav'));
        }

        const menu = document.getElementById('siteMenu');
        const backdrop = document.getElementById('menuBackdrop');
        const closeBtn = document.getElementById('menuClose');

        function openMenu(){
          if(!menu) return;
          menu.classList.add('open');
          backdrop.hidden = false; backdrop.classList.add('open');
          menu.setAttribute('aria-hidden','false');
          toggleButton.setAttribute('aria-expanded','true');
        }
        function closeMenu(){
          if(!menu) return;
          menu.classList.remove('open');
          backdrop.classList.remove('open');
          setTimeout(()=>{ if(backdrop) backdrop.hidden = true; }, 300);
          menu.setAttribute('aria-hidden','true');
          toggleButton.setAttribute('aria-expanded','false');
        }

        if(toggleButton){ toggleButton.addEventListener('click', openMenu); }
        if(backdrop){ backdrop.addEventListener('click', closeMenu); }
        if(closeBtn){ closeBtn.addEventListener('click', closeMenu); }
        document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMenu(); });
      })();
    </script>
    <script>
        // Initialize socket connection
        function initSocket() {
            const backendUrl = window.__BACKEND_URL || `${location.protocol}//${location.hostname}:3000`;
            const signalingPath = window.__SIGNALING_PATH || '/signaling';
            
            const socket = io(backendUrl, { 
                path: signalingPath,
                transports: ['polling', 'websocket'],
                reconnectionDelay: 1000,
                reconnection: true,
                upgrade: true
            });

            socket.on('connect', () => {
                console.log('[homepage] Connected to backend:', socket.id);
            });

            socket.on('numberOfOnline', (size) => {
                console.log('[homepage] Online count:', size);
                const onlineEl = document.getElementById('onlineCount');
                if (onlineEl) {
                    onlineEl.textContent = size;
                }
            });

            socket.on('error', (err) => {
                console.error('[homepage] Socket error:', err);
            });

            socket.on('connect_error', (err) => {
                console.error('[homepage] Socket connect_error:', err);
            });
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initSocket);
        } else {
            initSocket();
        }

        // Fallback on window load
        window.addEventListener('load', () => {
            if (!window.socketInitialized) {
                initSocket();
                window.socketInitialized = true;
            }
        });

        // Language selector (placeholder for future i18n)
        const langEl = document.getElementById('langSelect');
        if (langEl) {
            langEl.addEventListener('change', (e) => {
                const lang = e.target.value;
                console.log('Language selected:', lang);
                // TODO: Implement i18n translation logic here
            });
        }
    </script>
</body>
</html>